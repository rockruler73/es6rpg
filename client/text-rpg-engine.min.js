!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("text-rpg-engine",[],t):"object"==typeof exports?exports["text-rpg-engine"]=t():e["text-rpg-engine"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=t}var t,n,o;return t=e,(n=[{key:"addItems",value:function(e){return this.items=this.items.concat(e),this.items}},{key:"dropItem",value:function(e){var t=this.items.filter(function(t){return t.name!==e});return this.items=t,this.items}}])&&r(t.prototype,n),o&&r(t,o),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=new(((r=n(2))&&r.__esModule?r:{default:r}).default);t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(3)),o=u(n(4)),i=u(n(5)),a=u(n(6)),s=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,s,"next",e)}function s(e){f(i,r,o,a,s,"throw",e)}a(void 0)})}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:""),s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.Display=new r.default,this.Input=new o.default,this.datapath=t,this.rooms=n,this.startRoom=a,this.endRoom=s,this.Player=new i.default(a=this.startRoom)}var t,n,u;return t=e,(n=[{key:"init",value:function(){var e=d(regeneratorRuntime.mark(function e(){var t,n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadData(this.datapath);case 2:for(n=e.sent,r=0;r<n.length;r++)for(this.addRoom(n[r].name,n[r].getText),o=0;o<n[r].prompts.length;o++)n[r].prompts[o].name||(n[r].prompts[o].name=""),n[r].prompts[o].keywords||(n[r].prompts[o].keywords=[]),n[r].prompts[o].results||(n[r].prompts[o].results={}),n[r].prompts[o].requirements||(n[r].prompts[o].requirements=[]),this.rooms[r].addPrompt(n[r].prompts[o].name,n[r].prompts[o].keywords,n[r].prompts[o].results,n[r].prompts[o].requirements);""===this.startRoom&&this.rooms.length>0&&(this.startRoom=this.rooms[0].name,this.Player.startRoom=this.startRoom,this.Player.currentRoom=this.Player.startRoom),""===this.endRoom&&this.rooms.length>0&&(this.endRoom=this.rooms[this.rooms.length-1].name),i=0;case 7:if(!(i<this.rooms.length)){e.next=14;break}if(this.rooms[i].name!==this.startRoom){e.next=11;break}return t=this.rooms[i].getText,e.abrupt("break",14);case 11:i++,e.next=7;break;case 14:void 0===t&&(t="No starting room text found"),this.Display.show(t);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addRoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=new a.default(e,t,r,n);return this.rooms.push(o),o}},{key:"dropRoom",value:function(e){var t=this.rooms.filter(function(t){return t.name!==e});return this.rooms=t,this.rooms}},{key:"getRoom",value:function(e){return this.rooms.find(function(t){return t.name===e})}},{key:"decidePath",value:function(e){"restart"===e&&this.resetGame();var t=this,n=t.getRoom(t.Player.currentRoom);if(void 0!==c(n.prompts)){var r=!1;n.prompts.forEach(function(n){if(!1===r){var o=n.matchKeywords(e,t.Player.inventory.items);if(null!==o){if(r=!0,"success"in o&&(t.Display.show("<p>".concat(o.success.successText,"</p>")),void 0!==o.success.itemsGiven&&t.Player.inventory.addItems(o.success.itemsGiven),void 0!==o.success.roomToEnter)){var i,a,s=l(t.Player.enterRoom(t.getRoom(o.success.roomToEnter)),2);a=s[0],i=s[1],t.Display.append("<p>".concat(a,"</p>")),i&&o.success.roomToEnter===t.endRoom&&t.win()}if("fail"in o)return t.Display.show("".concat(o.fail.failText)),void t.Display.append("<p>Missing required items: ".concat(o.fail.missing.toString(),".\n              </p><p>").concat(t.getRoom(t.Player.currentRoom).getText,"</p>"))}}!1===r&&t.Display.show('<p>No actions could be done from: "'.concat(e,"\". Try something else, or be more \n          specific about what you're doing.</p><p>").concat(t.getRoom(t.Player.currentRoom).getText,"</p>"))})}else t.Display.show("<p>There doesn't seem to be any actions at all that you can do in this room.</p>\n      ".concat(t.getRoom(t.Player.currentRoom).getText))}},{key:"userSend",value:function(e){this.Input.send(e),this.decidePath(this.Input.value)}},{key:"disableInput",value:function(){this.Input.disable()}},{key:"enableInput",value:function(){this.Input.enable()}},{key:"win",value:function(){this.Display.append("<p>YOU WIN!</p>"),this.disableInput()}},{key:"resetGame",value:function(){this.Player.inventory=new s.default,this.Player.currentRoom=this.startRoom;var e=this.getRoom(this.startRoom);this.Display.show(e.getText),this.Input.enable()}},{key:"loadData",value:function(){var e=d(regeneratorRuntime.mark(function e(t){var n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:for(o=e.sent,i=0;i<o.rooms.length;i++)o.rooms[i].prompts||(o.rooms[i].prompts=[]),n.push(o.rooms[i]);return e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}])&&h(t.prototype,n),u&&h(t,u),e}();t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.html=t,this.elementId=n}var t,n,o;return t=e,(n=[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e?document.getElementById(this.elementId).innerHTML=this.html:(document.getElementById(this.elementId).innerHTML=e,this.html=e)}},{key:"append",value:function(e){document.getElementById(this.elementId).innerHtml+=e}}])&&r(t.prototype,n),o&&r(t,o),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"input";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.disabled=t,this.value=n,this.elementId=r}var t,n,o;return t=e,(n=[{key:"enable",value:function(){this.disabled=!1,document.getElementById("input").disabled=!1}},{key:"disable",value:function(){this.disabled=!0,document.getElementById("input").disabled=!0}},{key:"send",value:function(e){e=e.toLowerCase(),this.value=e}}])&&r(t.prototype,n),o&&r(t,o),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.default,r=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments[3]);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,""===this.name&&(this.name="player"),this.inventory=n,""===this.currentRoom&&(this.currentRoom=this.startRoom),this.startRoom=r}var t,n,r;return t=e,(n=[{key:"enterRoom",value:function(e){var t=e.enter(this.inventory.items);return!1===t[1]||(this.currentRoom=e.name),[t[0],t[1]]}},{key:"getItem",value:function(e){return this.inventory.addItem(e),this.inventory}},{key:"dropItem",value:function(e){return this.inventory.dropItem(e),this.inventory}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(7))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.getText=n,this.requirements=r,this.prompts=o}var t,n,r;return t=e,(n=[{key:"addPrompt",value:function(e,t,n,r){var i=new o.default(e,t,n,r);return this.prompts.push(i),this.prompts}},{key:"enter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="",n=!0;return this.requirements>0?0===e.length?(n=!1,this.requirements.forEach(function(e){t+="".concat(e.failText,". ")})):(this.requirements.forEach(function(e){var r=!1;this.items.forEach(function(t){t===e&&(r=!0)}),!1===r&&(n=!1,t+=e.failText)}),!0===n&&(t=this.getText)):t=this.getText,[t,n]}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.keywords=n.map(function(e){return e.toLowerCase()}),this.results=r,this.requirements=o}var t,n,o;return t=e,(n=[{key:"matchKeywords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,r=[];return this.requirements.length>0&&this.requirements.forEach(function(e){var n=!1;t.forEach(function(t){t===e&&(n=!0)}),n||r.push(e)}),this.keywords.forEach(function(t){e.includes(t.toLowerCase())&&(n=!0)}),n?r.length>0?{fail:{missing:r,failText:this.results.failText}}:{success:this.results}:null}}])&&r(t.prototype,n),o&&r(t,o),e}();t.default=o,e.exports=t.default}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL3RleHQtcnBnLWVuZ2luZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvaW52ZW50b3J5LmpzIiwid2VicGFjazovL3RleHQtcnBnLWVuZ2luZS8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvZ2FtZS5qcyIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvZGlzcGxheS5qcyIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvaW5wdXQuanMiLCJ3ZWJwYWNrOi8vdGV4dC1ycGctZW5naW5lLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvcm9vbS5qcyIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvcHJvbXB0LmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkludmVudG9yeSIsIml0ZW1zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX2NsYXNzQ2FsbENoZWNrIiwiY29uY2F0IiwiaXRlbU5hbWUiLCJuZXdJbnZlbnRvcnkiLCJmaWx0ZXIiLCJpdGVtIiwiZGVmYXVsdCIsIl9kaXNwbGF5IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9pbnB1dCIsIl9wbGF5ZXIiLCJfcm9vbSIsIl9pbnZlbnRvcnkiLCJHYW1lIiwiZGF0YXBhdGgiLCJyb29tcyIsInN0YXJ0Um9vbSIsImVuZFJvb20iLCJEaXNwbGF5IiwiSW5wdXQiLCJQbGF5ZXIiLCJsb2FkRGF0YSIsImFkZFJvb20iLCJnZXRUZXh0IiwiaiIsInByb21wdHMiLCJrZXl3b3JkcyIsInJlc3VsdHMiLCJyZXF1aXJlbWVudHMiLCJhZGRQcm9tcHQiLCJjdXJyZW50Um9vbSIsImRpc3BsYXlUZXh0Iiwic2hvdyIsInJvb21PYmoiLCJwdXNoIiwicm9vbU5hbWUiLCJuZXdSb29tcyIsInJvb20iLCJmaW5kIiwieCIsIm1lc3NhZ2UiLCJyZXNldEdhbWUiLCJfdGhpcyIsImN1cnJSb29tIiwiZ2V0Um9vbSIsIl90eXBlb2YiLCJmb3VuZFByb21wdCIsImZvckVhY2giLCJwcm9tcHQiLCJtYXRjaGluZ1Byb21wdFJlc3VsdHMiLCJtYXRjaEtleXdvcmRzIiwiaW52ZW50b3J5Iiwic3VjY2VzcyIsInN1Y2Nlc3NUZXh0IiwiaXRlbXNHaXZlbiIsImFkZEl0ZW1zIiwicm9vbVRvRW50ZXIiLCJlbnRlclJvb21SZXN1bHRTdWNjZXNzIiwiZW50ZXJSb29tUmVzdWx0VGV4dCIsIl90aGlzJFBsYXllciRlbnRlclJvbzIiLCJfc2xpY2VkVG9BcnJheSIsImVudGVyUm9vbSIsImFwcGVuZCIsIndpbiIsImZhaWwiLCJmYWlsVGV4dCIsIm1pc3NpbmciLCJ0b1N0cmluZyIsInNlbmQiLCJkZWNpZGVQYXRoIiwiZGlzYWJsZSIsImVuYWJsZSIsImRpc2FibGVJbnB1dCIsImZpbGVwYXRoIiwiZmV0Y2giLCJyZXNwb25zZSIsImpzb24iLCJkYXRhIiwiaHRtbCIsImVsZW1lbnRJZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJpbm5lckh0bWwiLCJkaXNhYmxlZCIsInRvTG93ZXJDYXNlIiwicm9vbVJlc3VsdCIsImVudGVyIiwiYWRkSXRlbSIsImRyb3BJdGVtIiwiX3Byb21wdCIsIlJvb20iLCJyZXN1bHRUZXh0IiwibWV0QWxsUmVxdWlyZW1lbnRzIiwicmVxdWlyZW1lbnQiLCJmb3VuZCIsIlByb21wdCIsIm1hcCIsInYiLCJmb3VuZEtleXdvcmQiLCJtaXNzaW5nUmVxdWlyZW1lbnRzIiwiZm91bmRSZXF1aXJlbWVudCIsImtleXdvcmQiLCJpbmNsdWRlcyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsSUFDQSxtQkFBQUcsZUFBQUMsSUFDQUQsT0FBQSxxQkFBQUgsR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxtQkFBQUQsSUFFQUQsRUFBQSxtQkFBQUMsSUFSQSxDQVNDLG9CQUFBSyxVQUFBQyxLQUFBLFdBQ0QsbUJDVEEsSUFBQUMsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUixRQUdBLElBQUFDLEVBQUFLLEVBQUFFLEdBQUEsQ0FDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBVixRQUFBLElBVUEsT0FOQVcsRUFBQUgsR0FBQUksS0FBQVgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQU8sR0FHQU4sRUFBQVMsR0FBQSxFQUdBVCxFQUFBRCxRQTBEQSxPQXJEQU8sRUFBQU0sRUFBQUYsRUFHQUosRUFBQU8sRUFBQVIsRUFHQUMsRUFBQVEsRUFBQSxTQUFBZixFQUFBZ0IsRUFBQUMsR0FDQVYsRUFBQVcsRUFBQWxCLEVBQUFnQixJQUNBRyxPQUFBQyxlQUFBcEIsRUFBQWdCLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNWLEVBQUFnQixFQUFBLFNBQUF2QixHQUNBLG9CQUFBd0Is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RUVDLEVBQW9CdEcsT0FBUyxFQUV4QixDQUFDa0UsS0FBUSxDQUNkRSxRQUFXa0MsRUFDWG5DLFNBQVkxRyxLQUFLb0UsUUFBUXNDLFdBSXRCLENBQUNiLFFBQVc3RixLQUFLb0UsU0FFbkIiLCJmaWxlIjoidGV4dC1ycGctZW5naW5lLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwidGV4dC1ycGctZW5naW5lXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInRleHQtcnBnLWVuZ2luZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ0ZXh0LXJwZy1lbmdpbmVcIl0gPSBmYWN0b3J5KCk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52ZW50b3J5IHtcclxuICAvLyBjb25zdHJ1Y3RvclxyXG4gIGNvbnN0cnVjdG9yKGl0ZW1zID0gW10pIHtcclxuICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuICB9XHJcblxyXG4gIC8vIGNhbiBhZGQgc2luZ2xlIG9yIG11bHRpcGxlIGl0ZW1zOyBwYXJhbWV0ZXIgcGFzc2VkIGluIHNob3VsZCBiZSBhbiBhcnJheVxyXG4gIGFkZEl0ZW1zKGl0ZW1zKSB7XHJcbiAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5jb25jYXQoaXRlbXMpO1xyXG4gICAgcmV0dXJuIHRoaXMuaXRlbXM7XHJcbiAgfVxyXG5cclxuICAvLyBkcm9wIGFuIGl0ZW0gYnkgZmlsdGVyaW5nIG91dCB0aGUgaXRlbSBuYW1lIHRoYXQgd2Ugd2FudCB0byBkcm9wIGFuZCByZXR1cm5pbmcgdGhlIGludmVudG9yeSB3aXRob3V0IGl0XHJcbiAgZHJvcEl0ZW0oaXRlbU5hbWUpIHtcclxuICAgIGxldCBuZXdJbnZlbnRvcnkgPSB0aGlzLml0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICByZXR1cm4gaXRlbS5uYW1lICE9PSBpdGVtTmFtZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuaXRlbXMgPSBuZXdJbnZlbnRvcnk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaXRlbXM7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBHYW1lIGZyb20gJy4vZ2FtZSc7XHJcblxyXG5jb25zdCBnYW1lID0gbmV3IEdhbWUoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWU7XHJcbiIsIi8qXHJcbmdhbWUuanNcclxuaW1wb3J0cyBhbmQgbWFuYWdlcyB0aGUgcGllY2VzIHdlIGJ1aWxkIHRvIG1ha2Ugb25lIGNvaGVzaXZlIGdhbWUhIFlheSFcclxuICovXHJcbi8vIGltcG9ydHMgLSB0aGVzZSBpbnN0YW50aWF0ZSB0aGUgaW1wb3J0cyBhbmQgc3RvcmUgdGhlbSBhcyBwcm9wZXJ0aWVzIHNvIHdlIGNhbiByZWZlcmVuY2UgdGhlaXIgcHJvcGVydGllcyBpbiBnYW1lLmpzXHJcbmltcG9ydCBEaXNwbGF5IGZyb20gJy4vZGlzcGxheSc7XHJcbmltcG9ydCBJbnB1dCBmcm9tICcuL2lucHV0JztcclxuaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcic7XHJcbmltcG9ydCBSb29tIGZyb20gJy4vcm9vbSc7XHJcbmltcG9ydCBJbnZlbnRvcnkgZnJvbSAnLi9pbnZlbnRvcnknO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XHJcbiAgLy8gY29uc3RydWN0b3JcclxuICBjb25zdHJ1Y3RvcihkYXRhcGF0aCA9ICcnLCByb29tcyA9IFtdLCBpdGVtcyA9IFtdLCBzdGFydFJvb20gPSAnJywgZW5kUm9vbSA9ICcnKSB7XHJcbiAgICB0aGlzLkRpc3BsYXkgPSBuZXcgRGlzcGxheSgpO1xyXG4gICAgdGhpcy5JbnB1dCA9IG5ldyBJbnB1dCgpO1xyXG4gICAgdGhpcy5kYXRhcGF0aCA9IGRhdGFwYXRoO1xyXG4gICAgLy8gZGF0YXBhdGggaXMgZm9yIGFuIGFkZGVkIGNoYWxsZW5nZSwgSSBjYW4gbG9hZCBpbiBhIEpTT04gZmlsZSB3aXRoIGEgZ2FtZSBidWlsdCBpbnRvIGl0IDopIGNoZWNrIGluaXQgZm9yIG1vcmVcclxuICAgIHRoaXMucm9vbXMgPSByb29tczsgLy8gYWxsIHJvb21zIGluIGdhbWVcclxuICAgIHRoaXMuc3RhcnRSb29tID0gc3RhcnRSb29tOyAvLyByb29tIHRoZSBwbGF5ZXIgd2lsbCBzdGFydCBpblxyXG4gICAgdGhpcy5lbmRSb29tID0gZW5kUm9vbTsgLy8gd2hpY2ggcm9vbSBpcyB0aGUgZ2FtZS1lbmQgcm9vbVxyXG4gICAgdGhpcy5QbGF5ZXIgPSBuZXcgUGxheWVyKHN0YXJ0Um9vbSA9IHRoaXMuc3RhcnRSb29tKTtcclxuICB9XHJcblxyXG4gIC8vIEluaXRpYWxpemVzIHRoZSBnYW1lXHJcbiAgYXN5bmMgaW5pdCgpIHtcclxuICAgIGxldCBkaXNwbGF5VGV4dDtcclxuXHJcbiAgICBsZXQgcm9vbXMgPSBhd2FpdCB0aGlzLmxvYWREYXRhKHRoaXMuZGF0YXBhdGgpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9vbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdGhpcy5hZGRSb29tKHJvb21zW2ldLm5hbWUsIHJvb21zW2ldLmdldFRleHQpO1xyXG5cclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByb29tc1tpXS5wcm9tcHRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgaWYgKCFyb29tc1tpXS5wcm9tcHRzW2pdLm5hbWUpIHtcclxuICAgICAgICAgIHJvb21zW2ldLnByb21wdHNbal0ubmFtZSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXJvb21zW2ldLnByb21wdHNbal0ua2V5d29yZHMpIHtcclxuICAgICAgICAgIHJvb21zW2ldLnByb21wdHNbal0ua2V5d29yZHMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFyb29tc1tpXS5wcm9tcHRzW2pdLnJlc3VsdHMpIHtcclxuICAgICAgICAgIHJvb21zW2ldLnByb21wdHNbal0ucmVzdWx0cyA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXJvb21zW2ldLnByb21wdHNbal0ucmVxdWlyZW1lbnRzKSB7XHJcbiAgICAgICAgICByb29tc1tpXS5wcm9tcHRzW2pdLnJlcXVpcmVtZW50cyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJvb21zW2ldLmFkZFByb21wdChyb29tc1tpXS5wcm9tcHRzW2pdLm5hbWUsIHJvb21zW2ldLnByb21wdHNbal0ua2V5d29yZHMsXHJcbiAgICAgICAgICByb29tc1tpXS5wcm9tcHRzW2pdLnJlc3VsdHMsIHJvb21zW2ldLnByb21wdHNbal0ucmVxdWlyZW1lbnRzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGdhbWUgd2Fzbid0IGluaXRhbGl6ZWQgd2l0aCBzdGFydFJvb20sIHNldCBpdCB0byB0aGUgZmlyc3Qgcm9vbVxyXG4gICAgaWYgKHRoaXMuc3RhcnRSb29tID09PSAnJyAmJiB0aGlzLnJvb21zLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5zdGFydFJvb20gPSB0aGlzLnJvb21zWzBdLm5hbWU7XHJcbiAgICAgIHRoaXMuUGxheWVyLnN0YXJ0Um9vbSA9IHRoaXMuc3RhcnRSb29tO1xyXG4gICAgICB0aGlzLlBsYXllci5jdXJyZW50Um9vbSA9IHRoaXMuUGxheWVyLnN0YXJ0Um9vbTtcclxuICAgIH1cclxuICAgIC8vIGlmIGdhbWUgd2Fzbid0IGluaXRhbGl6ZWQgd2l0aCBlbmRSb29tLCBzZXQgaXQgdG8gdGhlIGxhc3Qgcm9vbVxyXG4gICAgaWYgKHRoaXMuZW5kUm9vbSA9PT0gJycgJiYgdGhpcy5yb29tcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuZW5kUm9vbSA9IHRoaXMucm9vbXNbdGhpcy5yb29tcy5sZW5ndGggLSAxXS5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRpc3BsYXkgdGhlIHN0YXJ0Um9vbSB0ZXh0XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9vbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHRoaXMucm9vbXNbaV0ubmFtZSA9PT0gdGhpcy5zdGFydFJvb20pIHtcclxuICAgICAgICBkaXNwbGF5VGV4dCA9IHRoaXMucm9vbXNbaV0uZ2V0VGV4dDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChkaXNwbGF5VGV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGRpc3BsYXlUZXh0ID0gJ05vIHN0YXJ0aW5nIHJvb20gdGV4dCBmb3VuZCc7XHJcbiAgICB9XHJcbiAgICB0aGlzLkRpc3BsYXkuc2hvdyhkaXNwbGF5VGV4dCk7XHJcbiAgfVxyXG5cclxuICAvLyBtYW5hZ2Ugcm9vbXNcclxuXHJcbiAgLy8gY3JlYXRlIGEgbmV3IFJvb20gb2JqZWN0IGFuZCBwdXNoIGl0IG9udG8gdGhlIGN1cnJlbnQgcm9vbXMgbGlzdFxyXG4gIGFkZFJvb20obmFtZSwgZ2V0VGV4dCwgcHJvbXB0cyA9IFtdLCByZXF1aXJlbWVudHMgPSBbXSkge1xyXG4gICAgbGV0IHJvb21PYmogPSBuZXcgUm9vbShuYW1lLCBnZXRUZXh0LCByZXF1aXJlbWVudHMsIHByb21wdHMpO1xyXG5cclxuICAgIHRoaXMucm9vbXMucHVzaChyb29tT2JqKTtcclxuICAgIHJldHVybiByb29tT2JqO1xyXG4gIH1cclxuXHJcbiAgLy8gZmlsdGVyIG91dCBhIHJvb20gYW5kIGdldCByaWQgb2YgaXQgaWYgd2UgZG9uJ3Qgd2FudCBpdCBhbnltb3JlXHJcbiAgZHJvcFJvb20ocm9vbU5hbWUpIHtcclxuICAgIGxldCBuZXdSb29tcyA9IHRoaXMucm9vbXMuZmlsdGVyKGZ1bmN0aW9uIChyb29tKSB7XHJcbiAgICAgIHJldHVybiByb29tLm5hbWUgIT09IHJvb21OYW1lO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5yb29tcyA9IG5ld1Jvb21zO1xyXG4gICAgcmV0dXJuIHRoaXMucm9vbXM7XHJcbiAgfVxyXG5cclxuICAvLyByZXR1cm5zIHJvb20gb2JqZWN0IGdpdmVuIG5hbWVcclxuICBnZXRSb29tKHJvb21OYW1lKSB7XHJcbiAgICAvLyB4ID0+IGlzIGEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB3aWxsIHJldHVybiB0aGUgcm9vbSB3aG9zZSBuYW1lIGlzIHRoZSBzYW1lIGFzIHJvb21OYW1lXHJcbiAgICBjb25zdCByb29tID0gdGhpcy5yb29tcy5maW5kKHggPT4geC5uYW1lID09PSByb29tTmFtZSk7XHJcblxyXG4gICAgcmV0dXJuIHJvb207XHJcbiAgfVxyXG5cclxuICAvLyBHYW1lIEFJXHJcbiAgZGVjaWRlUGF0aChtZXNzYWdlKSB7XHJcbiAgICBpZiAobWVzc2FnZSA9PT0gJ3Jlc3RhcnQnKSB7XHJcbiAgICAgIHRoaXMucmVzZXRHYW1lKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBfdGhpcyA9IHRoaXM7XHJcbiAgICBjb25zdCBjdXJyUm9vbSA9IF90aGlzLmdldFJvb20oX3RoaXMuUGxheWVyLmN1cnJlbnRSb29tKTtcclxuXHJcbiAgICAvLyBEbyB3ZSBoYXZlIGFjdGlvbnMgdGhhdCB3ZSBjYW4gZG8gaW4gdGhlIHJvb20/XHJcbiAgICBpZiAodHlwZW9mIGN1cnJSb29tLnByb21wdHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAvLyBDaGVjayBldmVyeSBwcm9tcHQgYWN0aW9uIHRvIHNlZSBpZiBpdCBtYXRjaGVzIG91ciBpbnB1dCBrZXl3b3Jkc1xyXG4gICAgICAvLyBGb3Igbm93IGp1c3QgZ2V0IHRoZSBmaXJzdCBtYXRjaGluZyBwcm9tcHQgYW5kIGRvIHRoYXRcclxuICAgICAgbGV0IGZvdW5kUHJvbXB0ID0gZmFsc2U7XHJcblxyXG4gICAgICBjdXJyUm9vbS5wcm9tcHRzLmZvckVhY2goZnVuY3Rpb24gKHByb21wdCkge1xyXG4gICAgICAgIGlmIChmb3VuZFByb21wdCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUHJvbXB0UmVzdWx0cyA9IHByb21wdC5tYXRjaEtleXdvcmRzKG1lc3NhZ2UsIF90aGlzLlBsYXllci5pbnZlbnRvcnkuaXRlbXMpO1xyXG5cclxuICAgICAgICAgIC8vIElmIHdlIGdldCBhIG1hdGNoaW5nIHJlc3VsdCBiYWNrXHJcbiAgICAgICAgICBpZiAobWF0Y2hpbmdQcm9tcHRSZXN1bHRzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgcHJvbXB0IGhhcyBrZXl3b3JkcyB0aGF0IG1hdGNoIHRoZSB1c2VyJ3MgaW5wdXRcclxuICAgICAgICAgICAgZm91bmRQcm9tcHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyBJZiBwbGF5ZXIgc3VjY2VlZGVkIGluIHByb21wdCBhY3Rpb25cclxuICAgICAgICAgICAgaWYgKCdzdWNjZXNzJyBpbiBtYXRjaGluZ1Byb21wdFJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICBfdGhpcy5EaXNwbGF5LnNob3coYDxwPiR7bWF0Y2hpbmdQcm9tcHRSZXN1bHRzLnN1Y2Nlc3Muc3VjY2Vzc1RleHR9PC9wPmApO1xyXG4gICAgICAgICAgICAgIC8vIEdldCBpdGVtcyBmcm9tIHByb21wdCBpZiBhbnkgYXJlIHJldHVybmVkIGFuZCBhZGQgdGhlbSB0byBpbnZlbnRvcnlcclxuICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdQcm9tcHRSZXN1bHRzLnN1Y2Nlc3MuaXRlbXNHaXZlbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5QbGF5ZXIuaW52ZW50b3J5LmFkZEl0ZW1zKG1hdGNoaW5nUHJvbXB0UmVzdWx0cy5zdWNjZXNzLml0ZW1zR2l2ZW4pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyBJZiB0aGUgcHJvbXB0IHN1Y2Nlc3MgcmVzdWx0IGluY2x1ZGVzIGVudGVyaW5nIGEgbmV3IHJvb20uLlxyXG4gICAgICAgICAgICAgIGlmIChtYXRjaGluZ1Byb21wdFJlc3VsdHMuc3VjY2Vzcy5yb29tVG9FbnRlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZW50ZXJSb29tUmVzdWx0U3VjY2VzcztcclxuICAgICAgICAgICAgICAgIGxldCBlbnRlclJvb21SZXN1bHRUZXh0O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBwbGF5ZXIgY2FuIHN1Y2Nlc3NmdWxseSBlbnRlciB0aGUgcm9vbSAoZ2l2ZW4gdGhlIGludmVudG9yeSAvIHJvb20gcmVxdWlyZW1lbnRzKVxyXG4gICAgICAgICAgICAgICAgW2VudGVyUm9vbVJlc3VsdFRleHQsIGVudGVyUm9vbVJlc3VsdFN1Y2Nlc3NdID1cclxuICAgICAgICAgICAgICAgICAgX3RoaXMuUGxheWVyLmVudGVyUm9vbShfdGhpcy5nZXRSb29tKG1hdGNoaW5nUHJvbXB0UmVzdWx0cy5zdWNjZXNzLnJvb21Ub0VudGVyKSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5EaXNwbGF5LmFwcGVuZChgPHA+JHtlbnRlclJvb21SZXN1bHRUZXh0fTwvcD5gKTtcclxuICAgICAgICAgICAgICAgIGlmIChlbnRlclJvb21SZXN1bHRTdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBwbGF5ZXIgZW50ZXJlZCB3aW5uaW5nIHJvb21cclxuICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nUHJvbXB0UmVzdWx0cy5zdWNjZXNzLnJvb21Ub0VudGVyID09PSBfdGhpcy5lbmRSb29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMud2luKCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIFBsYXllciBjb3VsZCBub3QgZW50ZXIgcm9vbSAobWlzc2luZyByZXF1aXJlZCBpdGVtcyBpbiBpbnZlbnRvcnkpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFBsYXllciBmYWlsZWQgdG8gZG8gcHJvbXB0IChtaXNzaW5nIGl0ZW0gcmVxdWlyZW1lbnQpXHJcbiAgICAgICAgICAgIGlmICgnZmFpbCcgaW4gbWF0Y2hpbmdQcm9tcHRSZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgX3RoaXMuRGlzcGxheS5zaG93KGAke21hdGNoaW5nUHJvbXB0UmVzdWx0cy5mYWlsLmZhaWxUZXh0fWApO1xyXG4gICAgICAgICAgICAgIF90aGlzLkRpc3BsYXkuYXBwZW5kKGA8cD5NaXNzaW5nIHJlcXVpcmVkIGl0ZW1zOiAke21hdGNoaW5nUHJvbXB0UmVzdWx0cy5mYWlsLm1pc3NpbmcudG9TdHJpbmcoKX0uXHJcbiAgICAgICAgICAgICAgPC9wPjxwPiR7X3RoaXMuZ2V0Um9vbShfdGhpcy5QbGF5ZXIuY3VycmVudFJvb20pLmdldFRleHR9PC9wPmApO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZm91bmRQcm9tcHQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAvLyBQbGF5ZXIgZGlkbid0IHNheSBhbnkga2V5d29yZHMgdGhhdCB0cmlnZ2VyZWQgYW55IG9mIHRoZSBjdXJyZW50IHJvb20gcHJvbXB0c1xyXG4gICAgICAgICAgX3RoaXMuRGlzcGxheS5zaG93KGA8cD5ObyBhY3Rpb25zIGNvdWxkIGJlIGRvbmUgZnJvbTogXCIke21lc3NhZ2V9XCIuIFRyeSBzb21ldGhpbmcgZWxzZSwgb3IgYmUgbW9yZSBcclxuICAgICAgICAgIHNwZWNpZmljIGFib3V0IHdoYXQgeW91J3JlIGRvaW5nLjwvcD48cD4ke190aGlzLmdldFJvb20oX3RoaXMuUGxheWVyLmN1cnJlbnRSb29tKS5nZXRUZXh0fTwvcD5gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gTm8gcHJvbXB0cyBleGlzdCBmb3IgdGhlIGN1cnJlbnQgcm9vbVxyXG4gICAgICBfdGhpcy5EaXNwbGF5LnNob3coYDxwPlRoZXJlIGRvZXNuJ3Qgc2VlbSB0byBiZSBhbnkgYWN0aW9ucyBhdCBhbGwgdGhhdCB5b3UgY2FuIGRvIGluIHRoaXMgcm9vbS48L3A+XHJcbiAgICAgICR7X3RoaXMuZ2V0Um9vbShfdGhpcy5QbGF5ZXIuY3VycmVudFJvb20pLmdldFRleHR9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHcmFiIHRoZSBtZXNzYWdlIGZyb20gdGhlIHVzZXIgYW5kIHJ1biBJbnB1dC5zZW5kIG9uIGl0XHJcbiAgdXNlclNlbmQobWVzc2FnZSkge1xyXG4gICAgLy8gT3VyIElucHV0IGNsYXNzIHdpbGwgaGFuZGxlIGNsZWFuaW5nIC8gbm9ybWFsaXppbmcgc3RyaW5nc1xyXG4gICAgdGhpcy5JbnB1dC5zZW5kKG1lc3NhZ2UpO1xyXG4gICAgdGhpcy5kZWNpZGVQYXRoKHRoaXMuSW5wdXQudmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgLy8ganVzdCBtYWtlcyBpdCBlYXNpZXIvbW9yZSByZWFkYWJsZSB0byBkaXNhYmxlIGlucHV0XHJcbiAgZGlzYWJsZUlucHV0KCkge1xyXG4gICAgdGhpcy5JbnB1dC5kaXNhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvLyBqdXN0IG1ha2VzIGl0IGVhc2llci9tb3JlIHJlYWRhYmxlIHRvIGVuYWJsZSBpbnB1dFxyXG4gIGVuYWJsZUlucHV0KCkge1xyXG4gICAgdGhpcy5JbnB1dC5lbmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8vIHBsYXllciB3aW5zXHJcbiAgd2luKCkge1xyXG4gICAgLy8gc2hvdyB3aW4gdGV4dFxyXG4gICAgdGhpcy5EaXNwbGF5LmFwcGVuZCgnPHA+WU9VIFdJTiE8L3A+Jyk7XHJcblxyXG4gICAgLy8gZGlzYWJsZSBtb3JlIGlucHV0IGFmdGVyIHdpbm5pbmdcclxuICAgIHRoaXMuZGlzYWJsZUlucHV0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBQbGF5ZXIgcmVzZXRzIGdhbWVcclxuICByZXNldEdhbWUoKSB7XHJcbiAgICAvLyByZXNldHMgcGxheWVyIHdpdGggYmxhbmsgaW52ZW50b3J5IGFuZCBiYWNrIGluIHN0YXJ0aW5nIHJvb21cclxuICAgIHRoaXMuUGxheWVyLmludmVudG9yeSA9IG5ldyBJbnZlbnRvcnkoKTtcclxuICAgIHRoaXMuUGxheWVyLmN1cnJlbnRSb29tID0gdGhpcy5zdGFydFJvb207XHJcbiAgICBjb25zdCByb29tID0gdGhpcy5nZXRSb29tKHRoaXMuc3RhcnRSb29tKTtcclxuXHJcbiAgICB0aGlzLkRpc3BsYXkuc2hvdyhyb29tLmdldFRleHQpO1xyXG4gICAgdGhpcy5JbnB1dC5lbmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8vIGxvYWQgZnJvbSBqc29uIGZpbGVcclxuICBhc3luYyBsb2FkRGF0YShmaWxlcGF0aCkge1xyXG4gICAgbGV0IHJvb21zID0gW107XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaWxlcGF0aCk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5yb29tcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoIWRhdGEucm9vbXNbaV0ucHJvbXB0cykge1xyXG4gICAgICAgIGRhdGEucm9vbXNbaV0ucHJvbXB0cyA9IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIHJvb21zLnB1c2goZGF0YS5yb29tc1tpXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcm9vbXM7XHJcbiAgfVxyXG59XHJcbiIsIi8qXHJcbmRpc3BsYXkuanNcclxuU2hvd3MvYXBwZW5kcyB0ZXh0IHRvIHRoZSBzaXRlXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEaXNwbGF5IHtcclxuICAvLyBjb25zdHJ1Y3RvclxyXG4gIGNvbnN0cnVjdG9yKGh0bWwgPSAnJywgZWxlbWVudElkID0gJ2Rpc3BsYXknKSB7XHJcbiAgICB0aGlzLmh0bWwgPSBodG1sO1xyXG4gICAgdGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gIHNob3dzIGdpdmVuIEhUTUxcclxuICBpZiBubyBIVE1MIGlzIGdpdmVuLCBkaXNwbGF5IHRoZSBIVE1MIHRoYXQncyBpbiB0aGlzIG9iamVjdCdzIGh0bWwgcHJvcGVydHkgYWxyZWFkeVxyXG4gIG90aGVyd2lzZSwgc2V0IGJvdGggdGhlIGVsZW1lbnQncyBpbm5lciBIVE1MIGFuZCB0aGUgb2JqZWN0J3MgcHJvcGVydHkgdG8gdGhlIGdpdmVuIGh0bWxcclxuICAqL1xyXG4gIHNob3coaHRtbCA9IG51bGwpIHtcclxuICAgIGlmIChodG1sID09PSBudWxsKSB7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudElkKS5pbm5lckhUTUwgPSB0aGlzLmh0bWw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVsZW1lbnRJZCkuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgdGhpcy5odG1sID0gaHRtbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGFwcGVuZCBIVE1MIHRvIGRpc3BsYXkgc2NyZWVuXHJcbiAgYXBwZW5kKGh0bWwpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudElkKS5pbm5lckh0bWwgKz0gaHRtbDtcclxuICB9XHJcbn1cclxuIiwiLypcclxuaW5wdXQuanNcclxuU2hvd3MgdGV4dCwgYWxsb3dzIGZvciBpbnB1dFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXQge1xyXG4gIC8vIGNvbnN0cnVjdG9yXHJcbiAgY29uc3RydWN0b3IoZGlzYWJsZWQgPSBmYWxzZSwgdmFsdWUgPSAnJywgZWxlbWVudElkID0gJ2lucHV0Jykge1xyXG4gICAgdGhpcy5kaXNhYmxlZCA9IGRpc2FibGVkO1xyXG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgdGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XHJcbiAgfVxyXG5cclxuICAvLyBlbmFibGVzIGlucHV0IGFuZCBkb2VzIHRoZSBzYW1lIGluIHRoZSBIVE1MXHJcbiAgZW5hYmxlKCkge1xyXG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0JykuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIGRpc2FibGVzIGlucHV0IGFuZCBkb2VzIHRoZSBzYW1lIGluIHRoZSBIVE1MXHJcbiAgZGlzYWJsZSgpIHtcclxuICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0JykuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLy8gc2VuZHMgY2xpZW50IGlucHV0IHRvIGJlIGV2YWx1YXRlZFxyXG4gIHNlbmQodmFsdWUpIHtcclxuICAgIC8vIG5vcm1hbGl6ZSBpbnB1dCB2YWx1ZXNcclxuICAgIHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEludmVudG9yeSBmcm9tICcuL2ludmVudG9yeSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xyXG4gIC8vIGNvbnN0cnVjdG9yXHJcbiAgY29uc3RydWN0b3IobmFtZSA9ICcnLCBpbnZlbnRvcnkgPSBuZXcgSW52ZW50b3J5KCksIGN1cnJlbnRSb29tID0gJycsIHN0YXJ0Um9vbSkge1xyXG4gICAgLy8gaWYgbmFtZSBpcyBnaXZlbiwgc2V0IGl0OyBpZiBub3QsIHNldCBuYW1lIHRvICdwbGF5ZXInXHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgaWYgKHRoaXMubmFtZSA9PT0gJycpIHtcclxuICAgICAgdGhpcy5uYW1lID0gJ3BsYXllcic7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbnZlbnRvcnkgPSBpbnZlbnRvcnk7XHJcblxyXG4gICAgLy8gaWYgY3VycmVudFJvb20gaXMgYmxhbmssIHNldCBpdCB0byBzdGFydFJvb21cclxuICAgIGlmICh0aGlzLmN1cnJlbnRSb29tID09PSAnJykge1xyXG4gICAgICB0aGlzLmN1cnJlbnRSb29tID0gdGhpcy5zdGFydFJvb207XHJcbiAgICB9XHJcbiAgICB0aGlzLnN0YXJ0Um9vbSA9IHN0YXJ0Um9vbTtcclxuICB9XHJcblxyXG4gIC8vIGVudGVyIHJvb21cclxuICBlbnRlclJvb20ocm9vbSkge1xyXG4gICAgLy8gYXNzaWducyB0aGUgdmFsdWUgb2Ygcm9vbS5lbnRlciAocGFzcywgZmFpbCwgZXRjLikgdG8gcm9vbVJlc3VsdCAtIHRoYXQgbG9naWMgaXMgaW4gUm9vbVxyXG4gICAgY29uc3Qgcm9vbVJlc3VsdCA9IHJvb20uZW50ZXIodGhpcy5pbnZlbnRvcnkuaXRlbXMpO1xyXG5cclxuICAgIC8vIHJvb21SZXN1bHRbMV0gaXMgdGhlIG1ldEFsbFJlcXVpcmVtZW50cyBib29sIGluIHJvb20uanM7IGlmIGl0J3MgZmFsc2UsIHdlbGwsIHllYWgsIGl0J3MgZmFsc2VcclxuICAgIGlmIChyb29tUmVzdWx0WzFdID09PSBmYWxzZSkge1xyXG4gICAgICAvLyBwbGF5ZXIgZGlkbid0IGhhdmUgdGhlIHJlcXVpcmVkIGl0ZW1zIHRvIGVudGVyIHRoZSByb29tXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBlbnRlcmVkIHJvb21cclxuICAgICAgdGhpcy5jdXJyZW50Um9vbSA9IHJvb20ubmFtZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm4gcmVzdWx0cyB0ZXh0IGFuZCB3aGV0aGVyIG9yIG5vdCB0aGUgcGxheWVyIHN1Y2Nlc3NmdWxseSBlbnRlcmVkIHRoZSByb29tXHJcbiAgICByZXR1cm4gW3Jvb21SZXN1bHRbMF0sIHJvb21SZXN1bHRbMV1dO1xyXG4gIH1cclxuXHJcbiAgLy8gdGhlIGxvZ2ljIGZvciBnZXRJdGVtIGFuZCBkcm9wSXRlbSBpcyBpbiBpbnZlbnRvcnkuanNcclxuICBnZXRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuaW52ZW50b3J5LmFkZEl0ZW0oaXRlbSk7XHJcbiAgICByZXR1cm4gdGhpcy5pbnZlbnRvcnk7XHJcbiAgfVxyXG5cclxuICBkcm9wSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLmludmVudG9yeS5kcm9wSXRlbShpdGVtKTtcclxuICAgIHJldHVybiB0aGlzLmludmVudG9yeTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFByb21wdCBmcm9tICcuL3Byb21wdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSb29tIHtcclxuICAvLyBjb25zdHJ1Y3RvclxyXG4gIC8vIGFjY2VwdHMgYSBzdHJpbmcgcm9vbSBuYW1lLCBzdHJpbmcgb2YgdGV4dCwgYW4gYXJyYXkgb2YgcmVxcyB0byBlbnRlciB0aGUgcm9vbSwgYW5kIGEgbGlzdCBvZiBhY2NlcHRhYmxlIHByb21wdHNcclxuICBjb25zdHJ1Y3RvcihuYW1lID0gJycsIGdldFRleHQgPSAnJywgcmVxdWlyZW1lbnRzID0gW10sIHByb21wdHMgPSB7fSkge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuZ2V0VGV4dCA9IGdldFRleHQ7XHJcbiAgICB0aGlzLnJlcXVpcmVtZW50cyA9IHJlcXVpcmVtZW50cztcclxuICAgIHRoaXMucHJvbXB0cyA9IHByb21wdHM7XHJcbiAgfVxyXG5cclxuICAvLyBhZGQgYSBuZXcgcHJvbXB0L2ludGVyYWN0aW9uIHRvIGEgcm9vbVxyXG4gIGFkZFByb21wdChuYW1lLCBrZXl3b3JkcywgcmVzdWx0cywgcmVxdWlyZW1lbnRzKSB7XHJcbiAgICAvLyBjcmVhdGUgYSBuZXcgcHJvbXB0IGFuZCBhc3NpZ24gaXQgdG8gdGhlIGNvbnN0IHByb21wdFxyXG4gICAgY29uc3QgcHJvbXB0ID0gbmV3IFByb21wdChuYW1lLCBrZXl3b3JkcywgcmVzdWx0cywgcmVxdWlyZW1lbnRzKTtcclxuXHJcbiAgICAvLyBwdXNoIHRoZSBwcm9tcHQgb250byB0aGUgcm9vbSdzIGxpc3Qgb2YgcHJvbXB0c1xyXG4gICAgdGhpcy5wcm9tcHRzLnB1c2gocHJvbXB0KTtcclxuXHJcbiAgICAvLyByZXR1cm4gdGhlIG5ldyBsaXN0IG9mIHJvb20gcHJvbXB0c1xyXG4gICAgcmV0dXJuIHRoaXMucHJvbXB0cztcclxuICB9XHJcblxyXG4gIC8vIGVudGVyIGEgcm9vbVxyXG4gIGVudGVyKGl0ZW1zID0gW10pIHtcclxuICAgIGxldCByZXN1bHRUZXh0ID0gJyc7XHJcbiAgICBsZXQgbWV0QWxsUmVxdWlyZW1lbnRzID0gdHJ1ZTsgLy8gc2V0IHRvIHRydWUgdW50aWwgd2UgZmluZCB0aGF0IGl0J3Mgbm90XHJcblxyXG4gICAgLy8gVGhlIHJvb20gaXMgbm90IGFjY2Vzc2libGUgYnkgZGVmYXVsdCBpZiB3ZSBoYXZlIG1vcmUgdGhhbiBvbmUgcmVxdWlyZW1lbnQgKGl0ZW0pXHJcbiAgICBpZiAodGhpcy5yZXF1aXJlbWVudHMgPiAwKSB7XHJcbiAgICAgIC8vIGlmIHlvdSBkb24ndCBoYXZlIGVub3VnaCBpdGVtcywgZG9uJ3QgYWxsb3cgZW50cnkgcmlnaHQgb2ZmIHRoZSBiYXRcclxuICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIG1ldEFsbFJlcXVpcmVtZW50cyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEFkZCBtaXNzaW5nIHJlcXVpcmVtZW50IG1lc3NhZ2VzXHJcbiAgICAgICAgdGhpcy5yZXF1aXJlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAocmVxdWlyZW1lbnQpIHtcclxuICAgICAgICAgIHJlc3VsdFRleHQgKz0gYCR7cmVxdWlyZW1lbnQuZmFpbFRleHR9LiBgO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGNoZWNrIHRoZSByZXF1aXJlbWVudHMgdG8gc2VlIGlmIHlvdSd2ZSBmb3VuZCB0aGVtIGFsbFxyXG4gICAgICAgIHRoaXMucmVxdWlyZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKHJlcXVpcmVtZW50KSB7XHJcbiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAvLyBjaGVjayBhbGwgdXNlciBpdGVtczsgaWYgaXQncyBhIHJlcXVpcmVtZW50LCBzZXQgZm91bmQgdG8gdHJ1ZSBmb3IgdGhhdCBpdGVtXHJcbiAgICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0gPT09IHJlcXVpcmVtZW50KSB7XHJcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBpZiBmb3VuZCBpcyBmYWxzZSwgeW91J3JlIG1pc3NpbmcgYXQgbGVhc3Qgb25lIHJlcXVpcmVtZW50IC0gc2F5IHNvXHJcbiAgICAgICAgICBpZiAoZm91bmQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIG1ldEFsbFJlcXVpcmVtZW50cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXN1bHRUZXh0ICs9IHJlcXVpcmVtZW50LmZhaWxUZXh0O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBpZiBhbGwgaXRlbXMgd2VyZSBmb3VuZCwgZW50ZXIgdGhlIHJvb20gYW5kIHNob3cgdGhlIHJvb20gdGV4dFxyXG4gICAgICAgIGlmIChtZXRBbGxSZXF1aXJlbWVudHMgPT09IHRydWUpIHtcclxuICAgICAgICAgIHJlc3VsdFRleHQgPSB0aGlzLmdldFRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBpZiB0aGVyZSBhcmVuJ3QgYW55IGl0ZW1zIHJlcXVpcmVkIHRvIGVudGVyIHRoZSByb29tLCBqdXN0IHNob3cgdGhlIHJvb20gdGV4dFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzdWx0VGV4dCA9IHRoaXMuZ2V0VGV4dDtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm4gcmVzdWx0IHRleHQsIHdoYXRldmVyIGl0IHdvdW5kIHVwIGJlaW5nXHJcbiAgICByZXR1cm4gW3Jlc3VsdFRleHQsIG1ldEFsbFJlcXVpcmVtZW50c107XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb21wdCB7XHJcbiAgLy8gY29uc3RydWN0b3JcclxuICBjb25zdHJ1Y3RvcihuYW1lID0gJycsIGtleXdvcmRzID0gW10sIHJlc3VsdHMgPSB7fSwgcmVxdWlyZW1lbnRzID0gW10pIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAvLyBLZXl3b3JkcyB0aGF0IGNhbiB0cmlnZ2VyIHRoZSBwcm9tcHQgKG1ha2UgYWxsIGxvd2VyLWNhc2UgYnkgZGVmYXVsdClcclxuICAgIHRoaXMua2V5d29yZHMgPSBrZXl3b3Jkcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYudG9Mb3dlckNhc2UoKTt9KTtcclxuICAgIC8vIFJlc3VsdHMgdGhhdCBvY2N1ciB3aGVuIHRoaXMgcHJvbXB0IGlzIHN1Y2Nlc3NmdWxseSB0cmlnZ2VyZWQ7XHJcbiAgICAvLyB0aGUgcmVzdWx0IGtleXMgY29tcHJpc2Ugb2Yg4oCcc3VjY2Vzc1RleHTigJ0gKHJlcXVpcmVkKSwgXCJmYWlsVGV4dFwiIChvcHRpb25hbCksXHJcbiAgICAvLyDigJxpdGVtc1JlcXVpcmVk4oCdIChvcHRpb25hbCksIGFuZCDigJxyb29tVG9FbnRlcuKAnSAob3B0aW9uYWwpXHJcbiAgICB0aGlzLnJlc3VsdHMgPSByZXN1bHRzO1xyXG4gICAgLy8gQW55IHByZXJlcXVpc2l0ZSBpdGVtcyBuZWVkZWQgdG8gZG8gdGhlIHByb21wdD9cclxuICAgIHRoaXMucmVxdWlyZW1lbnRzID0gcmVxdWlyZW1lbnRzO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgaWYgaW5wdXQgbWVzc2FnZSBtYXRjaGVzIGFueSBwcm9tcHQga2V5d29yZHMgYW5kIHJldHVybiByZXN1bHRzXHJcbiAgbWF0Y2hLZXl3b3JkcyhtZXNzYWdlLCBpdGVtcyA9IFtdKSB7XHJcbiAgICBsZXQgZm91bmRLZXl3b3JkID0gZmFsc2U7XHJcbiAgICBsZXQgbWlzc2luZ1JlcXVpcmVtZW50cyA9IFtdO1xyXG5cclxuICAgIC8vIElmIHdlIGhhdmUgYW55IGl0ZW0gcmVxdWlyZW1lbnRzXHJcbiAgICBpZiAodGhpcy5yZXF1aXJlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyBDaGVjayBhbGwgdGhlIHJlcXVpcmVtZW50cyBhZ2FpbnN0IHRoZSBpdGVtcyBwYXNzZWRcclxuICAgICAgdGhpcy5yZXF1aXJlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAocmVxdWlyZW1lbnQpIHtcclxuICAgICAgICBsZXQgZm91bmRSZXF1aXJlbWVudCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICBpZiAoaXRlbSA9PT0gcmVxdWlyZW1lbnQpIHtcclxuICAgICAgICAgICAgZm91bmRSZXF1aXJlbWVudCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSWYgYSByZXF1aXJlbWVudCBpc24ndCBmb3VuZCBhZGQgdGhhdCBhIGxpc3RcclxuICAgICAgICBpZiAoIWZvdW5kUmVxdWlyZW1lbnQpIHtcclxuICAgICAgICAgIG1pc3NpbmdSZXF1aXJlbWVudHMucHVzaChyZXF1aXJlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIE9uY2Ugd2UgY2hlY2sgdG8gc2VlIGlmIHRoZSBwbGF5ZXIncyBtaXNzaW5nIGFueSBpdGVtcyxcclxuICAgIC8vIHBhcnNlIHRoZSBpbnB1dCBmb3IgbWF0Y2hpbmcga2V5d29yZHMgdG8gdGhlIHByb21wdFxyXG4gICAgdGhpcy5rZXl3b3Jkcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXl3b3JkKSB7XHJcbiAgICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKGtleXdvcmQudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICBmb3VuZEtleXdvcmQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIElmIGFueSBrZXl3b3JkcyBoYXZlIGJlZW4gbWF0Y2hlZCBmcm9tIHRoZSB1c2VyIGlucHV0XHJcbiAgICBpZiAoZm91bmRLZXl3b3JkKSB7XHJcbiAgICAgIC8vIElmIHRoZXJlIGFyZSBhbnkgbWlzc2luZyBpdGVtIHJlcXVpcmVtZW50c1xyXG4gICAgICBpZiAobWlzc2luZ1JlcXVpcmVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gUHJvbXB0IGZhaWxzOyByZXR1cm4gbWlzc2luZyBpdGVtcyBhbmQgZmFpbFRleHRcclxuICAgICAgICByZXR1cm4geydmYWlsJzoge1xyXG4gICAgICAgICAgJ21pc3NpbmcnOiBtaXNzaW5nUmVxdWlyZW1lbnRzLFxyXG4gICAgICAgICAgJ2ZhaWxUZXh0JzogdGhpcy5yZXN1bHRzLmZhaWxUZXh0fVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgLy8gUHJvbXB0IHN1Y2NlZWRzOyByZXR1cm4gcmVzdWx0cyBvZiB0aGUgcHJvbXB0XHJcbiAgICAgIHJldHVybiB7J3N1Y2Nlc3MnOiB0aGlzLnJlc3VsdHN9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=